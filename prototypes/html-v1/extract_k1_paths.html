<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>K1 SVG Path Extractor</title>
  <style>
    body {
      font-family: system-ui;
      max-width: 1200px;
      margin: 2rem auto;
      padding: 1rem;
      background: #1a1a1a;
      color: #f0f0f0;
    }
    #preview {
      background: #000;
      border: 1px solid #333;
      padding: 2rem;
      margin: 2rem 0;
      border-radius: 8px;
    }
    #preview svg {
      width: 100%;
      height: auto;
    }
    textarea {
      width: 100%;
      min-height: 200px;
      font-family: monospace;
      font-size: 12px;
      padding: 1rem;
      background: #0a0a0a;
      color: #0f0;
      border: 1px solid #333;
      border-radius: 4px;
    }
    button {
      background: #FFB84D;
      color: #000;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      margin-right: 1rem;
    }
    button:hover {
      background: #ffc870;
    }
    .status {
      padding: 1rem;
      background: #222;
      border-radius: 4px;
      margin: 1rem 0;
      font-family: monospace;
    }
    .success { color: #0f0; }
    .error { color: #f00; }
  </style>
</head>
<body>
  <h1>K1 SVG Path Extractor (Manrope Font)</h1>

  <div class="status" id="status">Loading opentype.js...</div>

  <div id="controls" style="display:none;">
    <button onclick="extractPaths()">Extract K1 Paths</button>
    <button onclick="copyToClipboard()">Copy SVG to Clipboard</button>
  </div>

  <div id="preview"></div>

  <h3>SVG Code:</h3>
  <textarea id="svgOutput" readonly></textarea>

  <h3>Path Data Only:</h3>
  <textarea id="pathOutput" readonly></textarea>

  <script src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>
  <script>
    let font = null;
    const statusEl = document.getElementById('status');

    // Load Manrope font from Google Fonts
    async function loadFont() {
      try {
        statusEl.innerHTML = '<span class="success">✓ opentype.js loaded</span><br>Fetching Manrope font...';

        // Fetch the Manrope font file
        const response = await fetch('https://fonts.gstatic.com/s/manrope/v14/xn7_YHE41ni1AdIRqAuZuw1Bx9mbZk59FO_F87jxeN7B.woff2');
        const arrayBuffer = await response.arrayBuffer();

        font = opentype.parse(arrayBuffer);
        statusEl.innerHTML = '<span class="success">✓ Manrope font loaded successfully!</span>';
        document.getElementById('controls').style.display = 'block';

        // Auto-extract on load
        extractPaths();
      } catch (error) {
        statusEl.innerHTML = `<span class="error">✗ Error: ${error.message}</span>`;
        console.error(error);
      }
    }

    function extractPaths() {
      if (!font) {
        alert('Font not loaded yet!');
        return;
      }

      try {
        // Get glyphs for "K" and "1"
        const k_glyph = font.charToGlyph('K');
        const one_glyph = font.charToGlyph('1');

        // Font size and positioning
        const fontSize = 200;
        const x = 10;
        const y = 160;

        // Get paths
        const k_path = k_glyph.getPath(x, y, fontSize);
        const one_path = one_glyph.getPath(x + k_glyph.advanceWidth * fontSize / font.unitsPerEm + 10, y, fontSize);

        // Convert to SVG path data
        const k_pathData = k_path.toPathData(2);
        const one_pathData = one_path.toPathData(2);

        // Calculate viewBox
        const k_bbox = k_path.getBoundingBox();
        const one_bbox = one_path.getBoundingBox();

        const minX = Math.min(k_bbox.x1, one_bbox.x1) - 20;
        const minY = Math.min(k_bbox.y1, one_bbox.y1) - 20;
        const maxX = Math.max(k_bbox.x2, one_bbox.x2) + 20;
        const maxY = Math.max(k_bbox.y2, one_bbox.y2) + 20;
        const width = maxX - minX;
        const height = maxY - minY;

        // Generate SVG
        const svg = `<svg viewBox="${minX} ${minY} ${width} ${height}" xmlns="http://www.w3.org/2000/svg">
  <g id="k1-paths">
    <!-- K glyph -->
    <path id="k1-letter-k" d="${k_pathData}" fill="none" stroke="rgba(242,242,242,0.6)" stroke-width="2"/>
    <!-- 1 glyph -->
    <path id="k1-letter-1" d="${one_pathData}" fill="none" stroke="rgba(242,242,242,0.6)" stroke-width="2"/>
  </g>
</svg>`;

        // Display preview
        document.getElementById('preview').innerHTML = svg;
        document.getElementById('svgOutput').value = svg;
        document.getElementById('pathOutput').value = `K path:\n${k_pathData}\n\n1 path:\n${one_pathData}`;

        statusEl.innerHTML = `<span class="success">✓ Paths extracted successfully!</span><br>
          ViewBox: ${minX.toFixed(1)}, ${minY.toFixed(1)}, ${width.toFixed(1)}, ${height.toFixed(1)}`;

      } catch (error) {
        statusEl.innerHTML = `<span class="error">✗ Extraction error: ${error.message}</span>`;
        console.error(error);
      }
    }

    function copyToClipboard() {
      const textarea = document.getElementById('svgOutput');
      textarea.select();
      document.execCommand('copy');
      alert('SVG copied to clipboard!');
    }

    // Start loading when page loads
    window.addEventListener('load', loadFont);
  </script>
</body>
</html>
